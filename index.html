<html>
	<head>
		<title>WTB</title>
		<style type="text/css" title="currentStyle">
			@import "css/demo_page.css";
			@import "css/demo_table.css";
		</style>
		<link rel="stylesheet" href="css/themes/base/jquery.ui.all.css">
		<link rel="stylesheet" href="css/demos.css">
		<script type='text/javascript' src="js/jquery-2.1.0.min.js"></script>
		<script type='text/javascript' src="js/jquery.dataTables.min.js"></script>
		<script type='text/javascript' src="js/ui/jquery.ui.core.js"></script>
		<script type='text/javascript' src="js/ui/jquery.ui.widget.js"></script>
		<script type='text/javascript' src="js/ui/jquery.ui.button.js"></script>
		<script type='text/javascript' src="js/ui/jquery.ui.widget.js"></script>
		<script type='text/javascript' src="js/ui/jquery.ui.position.js"></script>
		<script type='text/javascript' src="js/ui/jquery.ui.tooltip.js"></script>
		<style>
			#toolbar {
				padding: 4px;
				display: inline-block;
			}
			/* support: IE7 */
			*+ html #toolbar {
				display: inline;
			}
		</style>
		<script type="text/javascript" charset="utf-8">
            $(document).ready(function() {
                /// jQuery UI
                $("#home").button({
                    icons : {
                        primary : "ui-icon-home"
                    }
                }).click(function() {
                    top.location.href = "/index.html";
                });
                $("#add").button({
                    icons : {
                        primary : "ui-icon-circle-plus"
                    }
                }).click(function() {
                    top.location.href = "/insert.html";
                });
                $("#beginning").button({
                    text : false,
                    icons : {
                        primary : "ui-icon-seek-start"
                    }
                });
                $("#rewind").button({
                    text : false,
                    icons : {
                        primary : "ui-icon-seek-prev"
                    }
                });
                $("#play").button({
                    text : false,
                    icons : {
                        primary : "ui-icon-play"
                    }
                }).click(function() {
                    var options;
                    if ($(this).text() === "play") {
                        options = {
                            label : "pause",
                            icons : {
                                primary : "ui-icon-pause"
                            }
                        };
                    } else {
                        options = {
                            label : "play",
                            icons : {
                                primary : "ui-icon-play"
                            }
                        };
                    }
                    $(this).button("option", options);
                });
                $("#stop").button({
                    text : false,
                    icons : {
                        primary : "ui-icon-stop"
                    }
                }).click(function() {
                    $("#play").button("option", {
                        label : "play",
                        icons : {
                            primary : "ui-icon-play"
                        }
                    });
                });
                $("#forward").button({
                    text : false,
                    icons : {
                        primary : "ui-icon-seek-next"
                    }
                });
                $("#end").button({
                    text : false,
                    icons : {
                        primary : "ui-icon-seek-end"
                    }
                });
                $("#shuffle").button();
                $("#repeat").buttonset();
                // **** datatable ****
                //$('#tbl').dataTable();
                $('#tbl').dataTable({
                    "bJQueryUI" : true,
                    "bProcessing" : true,
                    "bServerSide" : true,
                    // 数据源
                    "sAjaxSource" : "q1.php",
                    // 传递参数进入php
                    "fnServerParams" : function(aoData) {
                        aoData.push({
                            "name" : "my_arg",
                            "value" : "my_value"
                        });
                    },
                    "fnDrawCallback" : function(oSettings) {
                        $(".del").button({
                            text : false,
                            icons : {
                                primary : "ui-icon-trash"
                            }
                        }).click(function() {

                        });
                    },
                    // 格式化输出
                    "aoColumnDefs" : [{
                        "mData" : "idwtb",
                        "aTargets" : [0],
                        "mRender" : function(data, type, full) {
                            // 'full' is the row's data object, and 'data' is this column's data
                            // e.g. 'full[0]' is the comic id, and 'data' is the comic title
                            return "<button class=\"del\">" + "	del this bid" + "</button>" + data;
                        }
                    }, {
                        "mData" : "item_name",
                        "aTargets" : [1]
                    }, {
                        "mData" : "play_name",
                        "aTargets" : [2]
                    }, {
                        "mData" : "c",
                        "aTargets" : [3],
                        "mRender" : function(data, type, full) {
                            // 'full' is the row's data object, and 'data' is this column's data
                            // e.g. 'full[0]' is the comic id, and 'data' is the comic title
                            return parseInt(data).toLocaleString();
                        }
                    }, {
                        "mData" : "hath",
                        "aTargets" : [4]
                    }, {
                        "mData" : "num_want",
                        "aTargets" : [5]
                    }, {
                        "mData" : "src",
                        "aTargets" : [6],
                        "mRender" : function(data, type, full) {
                            // 'full' is the row's data object, and 'data' is this column's data
                            // e.g. 'full[0]' is the comic id, and 'data' is the comic title
                            return '<a href="' + data + '">link</a>';
                        }
                    }]
                });

            });
		</script>
	</head>
	<body>
		<div>
			<div align="right">
				<div id="toolbar" class="ui-widget-header ui-corner-all">
					<button id="home" value="Submit">
						Home
					</button>
					<button id="add" title="新增wtb">
						Insert
					</button>
					<button id="beginning">
						go to beginning
					</button>
					<button id="rewind">
						rewind
					</button>
					<button id="play">
						play
					</button>
					<button id="stop">
						stop
					</button>
					<button id="forward">
						fast forward
					</button>
					<button id="end">
						go to end
					</button>

					<input type="checkbox" id="shuffle" />
					<label for="shuffle">Shuffle</label>

					<span id="repeat">
						<input type="radio" id="repeat0" name="repeat" checked="checked" />
						<label for="repeat0">No Repeat</label>
						<input type="radio" id="repeat1" name="repeat" />
						<label for="repeat1">Once</label>
						<input type="radio" id="repeatall" name="repeat" />
						<label for="repeatall">All</label> </span>
				</div>
			</div>
			<p></p>
			<div>
				<table id="tbl" cellpadding="0" cellspacing="0" border="1" class="display" width="100%">
					<thead>
						<tr>
							<th width="5%"  title="wtb编号">ID</th>
							<th width="18%" title="物品名称">Item name</th>
							<th width="16%" title="玩家名称">Player name</th>
							<th width="10%" title="空表示不接受Credit">Credit</th>
							<th width="8%" title="空表示不接受Hath">Hath</th>
							<th width="8%" title="数量">Qty.</th>
							<th>Ref.</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td colspan="7" class="dataTables_empty">Loading data from server 正在从服务器加载数据 ...</td>
						</tr>
					</tbody>
				</table>
				<p></p>

				<label>json format data : q1.php </label>
				<label>source code:<a href='https://github.com/zodiac1111/wtb-db'>https://github.com/zodiac1111/wtb-db</a></label>
			</div>
		</div>
	</body>
</html>
